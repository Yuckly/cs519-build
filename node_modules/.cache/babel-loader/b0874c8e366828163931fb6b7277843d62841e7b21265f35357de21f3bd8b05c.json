{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { gridClasses, useGridApiEventHandler, useGridApiOptionHandler, useGridApiMethod, useGridNativeEventListener, useGridLogger, useGridSelector, gridVirtualizationColumnEnabledSelector } from '@mui/x-data-grid';\nimport { clamp, findParentElementFromClassName, gridColumnsStateSelector, useOnMount, useTimeout, createControllablePromise } from '@mui/x-data-grid/internals';\nimport { useTheme } from '@mui/material/styles';\nimport { findGridCellElementsFromCol, getFieldFromHeaderElem, findHeaderElementFromField, findGroupHeaderElementsFromField, findGridHeader, findGridCells } from '../../../utils/domUtils';\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from './gridColumnResizeApi';\n// TODO: remove support for Safari < 13.\n// https://caniuse.com/#search=touch-action\n//\n// Safari, on iOS, supports touch action since v13.\n// Over 80% of the iOS phones are compatible\n// in August 2020.\n// Utilizing the CSS.supports method to check if touch-action is supported.\n// Since CSS.supports is supported on all but Edge@12 and IE and touch-action\n// is supported on both Edge@12 and IE if CSS.supports is not available that means that\n// touch-action will be supported\nlet cachedSupportsTouchActionNone = false;\nfunction doesSupportTouchActionNone() {\n  if (cachedSupportsTouchActionNone === undefined) {\n    if (typeof CSS !== 'undefined' && typeof CSS.supports === 'function') {\n      cachedSupportsTouchActionNone = CSS.supports('touch-action', 'none');\n    } else {\n      cachedSupportsTouchActionNone = true;\n    }\n  }\n  return cachedSupportsTouchActionNone;\n}\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return newWidth;\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(element, direction) {\n  const side = element.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (direction === 'rtl') {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef();\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (e.g. zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      var _cell$firstElementChi, _cell$firstElementChi2;\n      const style = window.getComputedStyle(cell, null);\n      const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n      const contentWidth = (_cell$firstElementChi = (_cell$firstElementChi2 = cell.firstElementChild) == null ? void 0 : _cell$firstElementChi2.getBoundingClientRect().width) != null ? _cell$firstElementChi : 0;\n      return paddingWidth + contentWidth;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        const title = header.querySelector(`.${gridClasses.columnHeaderTitle}`);\n        const content = header.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n        const element = title != null ? title : content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = paddingWidth + contentWidth;\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const colDefRef = React.useRef();\n  const colElementRef = React.useRef();\n  const headerFilterElementRef = React.useRef();\n  const colGroupingElementRef = React.useRef();\n  const colCellElementsRef = React.useRef();\n  const theme = useTheme();\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef();\n  const resizeDirection = React.useRef();\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef();\n  const updateWidth = newWidth => {\n    logger.debug(`Updating width to ${newWidth} for col ${colDefRef.current.field}`);\n    const prevWidth = colElementRef.current.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    colDefRef.current.computedWidth = newWidth;\n    colDefRef.current.width = newWidth;\n    colDefRef.current.flex = 0;\n    colElementRef.current.style.width = `${newWidth}px`;\n    colElementRef.current.style.minWidth = `${newWidth}px`;\n    colElementRef.current.style.maxWidth = `${newWidth}px`;\n    const headerFilterElement = headerFilterElementRef.current;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = `${newWidth}px`;\n      headerFilterElement.style.minWidth = `${newWidth}px`;\n      headerFilterElement.style.maxWidth = `${newWidth}px`;\n    }\n    [...colCellElementsRef.current, ...colGroupingElementRef.current].forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.width = finalWidth;\n      div.style.minWidth = finalWidth;\n      div.style.maxWidth = finalWidth;\n    });\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n    if (colDefRef.current) {\n      apiRef.current.setColumnWidth(colDefRef.current.field, colDefRef.current.width);\n      logger.debug(`Updating col ${colDefRef.current.field} with new width: ${colDefRef.current.width}`);\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: colElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: colElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    var _apiRef$current$colum, _apiRef$current$colum2;\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    // If touch-action: none; is not supported we need to prevent the scroll manually.\n    if (!doesSupportTouchActionNone()) {\n      event.preventDefault();\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    colElementRef.current = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(colElementRef.current);\n    const colDef = apiRef.current.getColumn(field);\n    colGroupingElementRef.current = findGroupHeaderElementsFromField((_apiRef$current$colum = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum.current, field);\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    colDefRef.current = colDef;\n    colElementRef.current = findHeaderElementFromField((_apiRef$current$colum2 = apiRef.current.columnHeadersElementRef) == null ? void 0 : _apiRef$current$colum2.current, colDef.field);\n    colCellElementsRef.current = findGridCellElementsFromCol(colElementRef.current, apiRef.current);\n    resizeDirection.current = getResizeDirection(event.target, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(touch.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (colElementRef.current) {\n      colElementRef.current.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, colElementRef, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(_ref2 => {\n    let {\n      field\n    } = _ref2;\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback((_ref3, event) => {\n    let {\n      colDef\n    } = _ref3;\n    var _apiRef$current$colum3, _apiRef$current$heade, _apiRef$current$colum4;\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    colDefRef.current = colDef;\n    colElementRef.current = (_apiRef$current$colum3 = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum3.current.querySelector(`[data-field=\"${colDef.field}\"]`);\n    const headerFilterRowElement = (_apiRef$current$heade = apiRef.current.headerFiltersElementRef) == null ? void 0 : _apiRef$current$heade.current;\n    if (headerFilterRowElement) {\n      headerFilterElementRef.current = headerFilterRowElement.querySelector(`[data-field=\"${colDef.field}\"]`);\n    }\n    colGroupingElementRef.current = findGroupHeaderElementsFromField((_apiRef$current$colum4 = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum4.current, colDef.field);\n    colCellElementsRef.current = findGridCellElementsFromCol(colElementRef.current, apiRef.current);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    resizeDirection.current = getResizeDirection(event.currentTarget, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(event.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    var _apiRef$current$rootE, _userOptions$columns;\n    const root = (_apiRef$current$rootE = apiRef.current.rootElementRef) == null ? void 0 : _apiRef$current$rootE.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef.current.state);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: (_userOptions$columns = userOptions == null ? void 0 : userOptions.columns) != null ? _userOptions$columns : state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      apiRef.current.unstable_setColumnVirtualization(false);\n      await columnVirtualizationDisabled();\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field]\n      }));\n      if (options.expand) {\n        var _apiRef$current$getRo, _apiRef$current$getRo2;\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => {\n          var _ref, _widthByField$column$;\n          return total + ((_ref = (_widthByField$column$ = widthByField[column.field]) != null ? _widthByField$column$ : column.computedWidth) != null ? _ref : column.width);\n        }, 0);\n        const availableWidth = (_apiRef$current$getRo = (_apiRef$current$getRo2 = apiRef.current.getRootDimensions()) == null ? void 0 : _apiRef$current$getRo2.viewportInnerSize.width) != null ? _apiRef$current$getRo : 0;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n    } finally {\n      apiRef.current.unstable_setColumnVirtualization(true);\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => {\n    var _apiRef$current$colum5;\n    return (_apiRef$current$colum5 = apiRef.current.columnHeadersElementRef) == null ? void 0 : _apiRef$current$colum5.current;\n  }, 'touchstart', handleTouchStart, {\n    passive: doesSupportTouchActionNone()\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridApiEventHandler(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridApiEventHandler(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridApiEventHandler(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridApiOptionHandler(apiRef, 'columnResize', props.onColumnResize);\n  useGridApiOptionHandler(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};","map":{"version":3,"names":["_extends","React","unstable_ownerDocument","ownerDocument","unstable_useEventCallback","useEventCallback","gridClasses","useGridApiEventHandler","useGridApiOptionHandler","useGridApiMethod","useGridNativeEventListener","useGridLogger","useGridSelector","gridVirtualizationColumnEnabledSelector","clamp","findParentElementFromClassName","gridColumnsStateSelector","useOnMount","useTimeout","createControllablePromise","useTheme","findGridCellElementsFromCol","getFieldFromHeaderElem","findHeaderElementFromField","findGroupHeaderElementsFromField","findGridHeader","findGridCells","DEFAULT_GRID_AUTOSIZE_OPTIONS","cachedSupportsTouchActionNone","doesSupportTouchActionNone","undefined","CSS","supports","trackFinger","event","currentTouchId","changedTouches","i","length","touch","identifier","x","clientX","y","clientY","computeNewWidth","initialOffsetToSeparator","clickX","columnBounds","resizeDirection","newWidth","left","right","computeOffsetToSeparator","flipResizeDirection","side","getResizeDirection","element","direction","classList","contains","preventClick","preventDefault","stopImmediatePropagation","useColumnVirtualizationDisabled","apiRef","promise","useRef","selector","value","useEffect","current","resolve","asyncCheck","Promise","excludeOutliers","inputValues","factor","values","slice","sort","a","b","q1","Math","floor","q3","iqr","deviation","filter","v","extractColumnWidths","options","columns","widthByField","root","rootElementRef","add","autosizing","forEach","column","cells","field","widths","map","cell","_cell$firstElementChi","_cell$firstElementChi2","style","window","getComputedStyle","paddingWidth","parseInt","paddingLeft","paddingRight","contentWidth","firstElementChild","getBoundingClientRect","width","filteredWidths","includeOutliers","outliersFactor","includeHeaders","header","title","querySelector","columnHeaderTitle","content","columnHeaderTitleContainerContent","scrollWidth","push","hasColumnMin","minWidth","Infinity","hasColumnMax","maxWidth","min","max","maxContent","remove","columnResizeStateInitializer","state","columnResize","resizingColumnField","useGridColumnResize","props","logger","colDefRef","colElementRef","headerFilterElementRef","colGroupingElementRef","colCellElementsRef","theme","stopResizeEventTimeout","touchId","updateWidth","debug","prevWidth","offsetWidth","widthDiff","computedWidth","flex","headerFilterElement","div","finalWidth","getAttribute","finishResize","nativeEvent","stopListening","setColumnWidth","start","publishEvent","handleResizeMouseUp","handleResizeMouseMove","buttons","params","colDef","handleTouchEnd","finger","handleTouchMove","type","handleTouchStart","_apiRef$current$colum","_apiRef$current$colum2","cellSeparator","target","columnHeader","getColumn","columnHeadersContainerElementRef","columnHeadersElementRef","doc","currentTarget","addEventListener","useCallback","body","removeProperty","removeEventListener","setTimeout","pointerEvents","handleResizeStart","setState","forceUpdate","handleResizeStop","handleColumnResizeMouseDown","_apiRef$current$colum3","_apiRef$current$heade","_apiRef$current$colum4","button","headerFilterRowElement","headerFiltersElementRef","cursor","handleColumnSeparatorDoubleClick","disableAutosize","lookup","resizable","autosizeColumns","autosizeOptions","columnVirtualizationDisabled","isAutosizingRef","userOptions","_apiRef$current$rootE","_userOptions$columns","orderedFields","c","columnVisibilityModel","unstable_setColumnVirtualization","newColumns","expand","_apiRef$current$getRo","_apiRef$current$getRo2","visibleColumns","totalWidth","reduce","total","_ref","_widthByField$column$","availableWidth","getRootDimensions","viewportInnerSize","remainingWidth","widthPerColumn","updateColumns","autosizeOnMount","then","_apiRef$current$colum5","passive","onColumnResize","onColumnWidthChange"],"sources":["/Users/jiasonghuang/Desktop/cs519_diagnostic/diagnostic-test-Yuckly/node_modules/@mui/x-data-grid-pro/hooks/features/columnResize/useGridColumnResize.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_ownerDocument as ownerDocument, unstable_useEventCallback as useEventCallback } from '@mui/utils';\nimport { gridClasses, useGridApiEventHandler, useGridApiOptionHandler, useGridApiMethod, useGridNativeEventListener, useGridLogger, useGridSelector, gridVirtualizationColumnEnabledSelector } from '@mui/x-data-grid';\nimport { clamp, findParentElementFromClassName, gridColumnsStateSelector, useOnMount, useTimeout, createControllablePromise } from '@mui/x-data-grid/internals';\nimport { useTheme } from '@mui/material/styles';\nimport { findGridCellElementsFromCol, getFieldFromHeaderElem, findHeaderElementFromField, findGroupHeaderElementsFromField, findGridHeader, findGridCells } from '../../../utils/domUtils';\nimport { DEFAULT_GRID_AUTOSIZE_OPTIONS } from './gridColumnResizeApi';\n// TODO: remove support for Safari < 13.\n// https://caniuse.com/#search=touch-action\n//\n// Safari, on iOS, supports touch action since v13.\n// Over 80% of the iOS phones are compatible\n// in August 2020.\n// Utilizing the CSS.supports method to check if touch-action is supported.\n// Since CSS.supports is supported on all but Edge@12 and IE and touch-action\n// is supported on both Edge@12 and IE if CSS.supports is not available that means that\n// touch-action will be supported\nlet cachedSupportsTouchActionNone = false;\nfunction doesSupportTouchActionNone() {\n  if (cachedSupportsTouchActionNone === undefined) {\n    if (typeof CSS !== 'undefined' && typeof CSS.supports === 'function') {\n      cachedSupportsTouchActionNone = CSS.supports('touch-action', 'none');\n    } else {\n      cachedSupportsTouchActionNone = true;\n    }\n  }\n  return cachedSupportsTouchActionNone;\n}\nfunction trackFinger(event, currentTouchId) {\n  if (currentTouchId !== undefined && event.changedTouches) {\n    for (let i = 0; i < event.changedTouches.length; i += 1) {\n      const touch = event.changedTouches[i];\n      if (touch.identifier === currentTouchId) {\n        return {\n          x: touch.clientX,\n          y: touch.clientY\n        };\n      }\n    }\n    return false;\n  }\n  return {\n    x: event.clientX,\n    y: event.clientY\n  };\n}\nfunction computeNewWidth(initialOffsetToSeparator, clickX, columnBounds, resizeDirection) {\n  let newWidth = initialOffsetToSeparator;\n  if (resizeDirection === 'Right') {\n    newWidth += clickX - columnBounds.left;\n  } else {\n    newWidth += columnBounds.right - clickX;\n  }\n  return newWidth;\n}\nfunction computeOffsetToSeparator(clickX, columnBounds, resizeDirection) {\n  if (resizeDirection === 'Left') {\n    return clickX - columnBounds.left;\n  }\n  return columnBounds.right - clickX;\n}\nfunction flipResizeDirection(side) {\n  if (side === 'Right') {\n    return 'Left';\n  }\n  return 'Right';\n}\nfunction getResizeDirection(element, direction) {\n  const side = element.classList.contains(gridClasses['columnSeparator--sideRight']) ? 'Right' : 'Left';\n  if (direction === 'rtl') {\n    // Resizing logic should be mirrored in the RTL case\n    return flipResizeDirection(side);\n  }\n  return side;\n}\nfunction preventClick(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\n/**\n * Checker that returns a promise that resolves when the column virtualization\n * is disabled.\n */\nfunction useColumnVirtualizationDisabled(apiRef) {\n  const promise = React.useRef();\n  const selector = () => gridVirtualizationColumnEnabledSelector(apiRef);\n  const value = useGridSelector(apiRef, selector);\n  React.useEffect(() => {\n    if (promise.current && value === false) {\n      promise.current.resolve();\n      promise.current = undefined;\n    }\n  });\n  const asyncCheck = () => {\n    if (!promise.current) {\n      if (selector() === false) {\n        return Promise.resolve();\n      }\n      promise.current = createControllablePromise();\n    }\n    return promise.current;\n  };\n  return asyncCheck;\n}\n\n/**\n * Basic statistical outlier detection, checks if the value is `F * IQR` away from\n * the Q1 and Q3 boundaries. IQR: interquartile range.\n */\nfunction excludeOutliers(inputValues, factor) {\n  if (inputValues.length < 4) {\n    return inputValues;\n  }\n  const values = inputValues.slice();\n  values.sort((a, b) => a - b);\n  const q1 = values[Math.floor(values.length * 0.25)];\n  const q3 = values[Math.floor(values.length * 0.75) - 1];\n  const iqr = q3 - q1;\n\n  // We make a small adjustment if `iqr < 5` for the cases where the IQR is\n  // very small (e.g. zero) due to very close by values in the input data.\n  // Otherwise, with an IQR of `0`, anything outside that would be considered\n  // an outlier, but it makes more sense visually to allow for this 5px variance\n  // rather than showing a cropped cell.\n  const deviation = iqr < 5 ? 5 : iqr * factor;\n  return values.filter(v => v > q1 - deviation && v < q3 + deviation);\n}\nfunction extractColumnWidths(apiRef, options, columns) {\n  const widthByField = {};\n  const root = apiRef.current.rootElementRef.current;\n  root.classList.add(gridClasses.autosizing);\n  columns.forEach(column => {\n    const cells = findGridCells(apiRef.current, column.field);\n    const widths = cells.map(cell => {\n      var _cell$firstElementChi, _cell$firstElementChi2;\n      const style = window.getComputedStyle(cell, null);\n      const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n      const contentWidth = (_cell$firstElementChi = (_cell$firstElementChi2 = cell.firstElementChild) == null ? void 0 : _cell$firstElementChi2.getBoundingClientRect().width) != null ? _cell$firstElementChi : 0;\n      return paddingWidth + contentWidth;\n    });\n    const filteredWidths = options.includeOutliers ? widths : excludeOutliers(widths, options.outliersFactor);\n    if (options.includeHeaders) {\n      const header = findGridHeader(apiRef.current, column.field);\n      if (header) {\n        const title = header.querySelector(`.${gridClasses.columnHeaderTitle}`);\n        const content = header.querySelector(`.${gridClasses.columnHeaderTitleContainerContent}`);\n        const element = title != null ? title : content;\n        const style = window.getComputedStyle(header, null);\n        const paddingWidth = parseInt(style.paddingLeft, 10) + parseInt(style.paddingRight, 10);\n        const contentWidth = element.scrollWidth + 1;\n        const width = paddingWidth + contentWidth;\n        filteredWidths.push(width);\n      }\n    }\n    const hasColumnMin = column.minWidth !== -Infinity && column.minWidth !== undefined;\n    const hasColumnMax = column.maxWidth !== Infinity && column.maxWidth !== undefined;\n    const min = hasColumnMin ? column.minWidth : 0;\n    const max = hasColumnMax ? column.maxWidth : Infinity;\n    const maxContent = filteredWidths.length === 0 ? 0 : Math.max(...filteredWidths);\n    widthByField[column.field] = clamp(maxContent, min, max);\n  });\n  root.classList.remove(gridClasses.autosizing);\n  return widthByField;\n}\nexport const columnResizeStateInitializer = state => _extends({}, state, {\n  columnResize: {\n    resizingColumnField: ''\n  }\n});\n/**\n * @requires useGridColumns (method, event)\n * TODO: improve experience for last column\n */\nexport const useGridColumnResize = (apiRef, props) => {\n  const logger = useGridLogger(apiRef, 'useGridColumnResize');\n  const colDefRef = React.useRef();\n  const colElementRef = React.useRef();\n  const headerFilterElementRef = React.useRef();\n  const colGroupingElementRef = React.useRef();\n  const colCellElementsRef = React.useRef();\n  const theme = useTheme();\n\n  // To improve accessibility, the separator has padding on both sides.\n  // Clicking inside the padding area should be treated as a click in the separator.\n  // This ref stores the offset between the click and the separator.\n  const initialOffsetToSeparator = React.useRef();\n  const resizeDirection = React.useRef();\n  const stopResizeEventTimeout = useTimeout();\n  const touchId = React.useRef();\n  const updateWidth = newWidth => {\n    logger.debug(`Updating width to ${newWidth} for col ${colDefRef.current.field}`);\n    const prevWidth = colElementRef.current.offsetWidth;\n    const widthDiff = newWidth - prevWidth;\n    colDefRef.current.computedWidth = newWidth;\n    colDefRef.current.width = newWidth;\n    colDefRef.current.flex = 0;\n    colElementRef.current.style.width = `${newWidth}px`;\n    colElementRef.current.style.minWidth = `${newWidth}px`;\n    colElementRef.current.style.maxWidth = `${newWidth}px`;\n    const headerFilterElement = headerFilterElementRef.current;\n    if (headerFilterElement) {\n      headerFilterElement.style.width = `${newWidth}px`;\n      headerFilterElement.style.minWidth = `${newWidth}px`;\n      headerFilterElement.style.maxWidth = `${newWidth}px`;\n    }\n    [...colCellElementsRef.current, ...colGroupingElementRef.current].forEach(element => {\n      const div = element;\n      let finalWidth;\n      if (div.getAttribute('aria-colspan') === '1') {\n        finalWidth = `${newWidth}px`;\n      } else {\n        // Cell with colspan > 1 cannot be just updated width new width.\n        // Instead, we add width diff to the current width.\n        finalWidth = `${div.offsetWidth + widthDiff}px`;\n      }\n      div.style.width = finalWidth;\n      div.style.minWidth = finalWidth;\n      div.style.maxWidth = finalWidth;\n    });\n  };\n  const finishResize = nativeEvent => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    stopListening();\n    if (colDefRef.current) {\n      apiRef.current.setColumnWidth(colDefRef.current.field, colDefRef.current.width);\n      logger.debug(`Updating col ${colDefRef.current.field} with new width: ${colDefRef.current.width}`);\n    }\n    stopResizeEventTimeout.start(0, () => {\n      apiRef.current.publishEvent('columnResizeStop', null, nativeEvent);\n    });\n  };\n  const handleResizeMouseUp = useEventCallback(finishResize);\n  const handleResizeMouseMove = useEventCallback(nativeEvent => {\n    // Cancel move in case some other element consumed a mouseup event and it was not fired.\n    if (nativeEvent.buttons === 0) {\n      handleResizeMouseUp(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, nativeEvent.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: colElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchEnd = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n    finishResize(nativeEvent);\n  });\n  const handleTouchMove = useEventCallback(nativeEvent => {\n    const finger = trackFinger(nativeEvent, touchId.current);\n    if (!finger) {\n      return;\n    }\n\n    // Cancel move in case some other element consumed a touchmove event and it was not fired.\n    if (nativeEvent.type === 'mousemove' && nativeEvent.buttons === 0) {\n      handleTouchEnd(nativeEvent);\n      return;\n    }\n    let newWidth = computeNewWidth(initialOffsetToSeparator.current, finger.x, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    newWidth = clamp(newWidth, colDefRef.current.minWidth, colDefRef.current.maxWidth);\n    updateWidth(newWidth);\n    const params = {\n      element: colElementRef.current,\n      colDef: colDefRef.current,\n      width: newWidth\n    };\n    apiRef.current.publishEvent('columnResize', params, nativeEvent);\n  });\n  const handleTouchStart = useEventCallback(event => {\n    var _apiRef$current$colum, _apiRef$current$colum2;\n    const cellSeparator = findParentElementFromClassName(event.target, gridClasses['columnSeparator--resizable']);\n    // Let the event bubble if the target is not a col separator\n    if (!cellSeparator) {\n      return;\n    }\n    // If touch-action: none; is not supported we need to prevent the scroll manually.\n    if (!doesSupportTouchActionNone()) {\n      event.preventDefault();\n    }\n    const touch = event.changedTouches[0];\n    if (touch != null) {\n      // A number that uniquely identifies the current finger in the touch session.\n      touchId.current = touch.identifier;\n    }\n    colElementRef.current = findParentElementFromClassName(event.target, gridClasses.columnHeader);\n    const field = getFieldFromHeaderElem(colElementRef.current);\n    const colDef = apiRef.current.getColumn(field);\n    colGroupingElementRef.current = findGroupHeaderElementsFromField((_apiRef$current$colum = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum.current, field);\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field\n    }, event);\n    colDefRef.current = colDef;\n    colElementRef.current = findHeaderElementFromField((_apiRef$current$colum2 = apiRef.current.columnHeadersElementRef) == null ? void 0 : _apiRef$current$colum2.current, colDef.field);\n    colCellElementsRef.current = findGridCellElementsFromCol(colElementRef.current, apiRef.current);\n    resizeDirection.current = getResizeDirection(event.target, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(touch.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    const doc = ownerDocument(event.currentTarget);\n    doc.addEventListener('touchmove', handleTouchMove);\n    doc.addEventListener('touchend', handleTouchEnd);\n  });\n  const stopListening = React.useCallback(() => {\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.removeProperty('cursor');\n    doc.removeEventListener('mousemove', handleResizeMouseMove);\n    doc.removeEventListener('mouseup', handleResizeMouseUp);\n    doc.removeEventListener('touchmove', handleTouchMove);\n    doc.removeEventListener('touchend', handleTouchEnd);\n    // The click event runs right after the mouseup event, we want to wait until it\n    // has been canceled before removing our handler.\n    setTimeout(() => {\n      doc.removeEventListener('click', preventClick, true);\n    }, 100);\n    if (colElementRef.current) {\n      colElementRef.current.style.pointerEvents = 'unset';\n    }\n  }, [apiRef, colElementRef, handleResizeMouseMove, handleResizeMouseUp, handleTouchMove, handleTouchEnd]);\n  const handleResizeStart = React.useCallback(({\n    field\n  }) => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: field\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleResizeStop = React.useCallback(() => {\n    apiRef.current.setState(state => _extends({}, state, {\n      columnResize: _extends({}, state.columnResize, {\n        resizingColumnField: ''\n      })\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef]);\n  const handleColumnResizeMouseDown = useEventCallback(({\n    colDef\n  }, event) => {\n    var _apiRef$current$colum3, _apiRef$current$heade, _apiRef$current$colum4;\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n\n    // Skip if the column isn't resizable\n    if (!event.currentTarget.classList.contains(gridClasses['columnSeparator--resizable'])) {\n      return;\n    }\n\n    // Avoid text selection\n    event.preventDefault();\n    logger.debug(`Start Resize on col ${colDef.field}`);\n    apiRef.current.publishEvent('columnResizeStart', {\n      field: colDef.field\n    }, event);\n    colDefRef.current = colDef;\n    colElementRef.current = (_apiRef$current$colum3 = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum3.current.querySelector(`[data-field=\"${colDef.field}\"]`);\n    const headerFilterRowElement = (_apiRef$current$heade = apiRef.current.headerFiltersElementRef) == null ? void 0 : _apiRef$current$heade.current;\n    if (headerFilterRowElement) {\n      headerFilterElementRef.current = headerFilterRowElement.querySelector(`[data-field=\"${colDef.field}\"]`);\n    }\n    colGroupingElementRef.current = findGroupHeaderElementsFromField((_apiRef$current$colum4 = apiRef.current.columnHeadersContainerElementRef) == null ? void 0 : _apiRef$current$colum4.current, colDef.field);\n    colCellElementsRef.current = findGridCellElementsFromCol(colElementRef.current, apiRef.current);\n    const doc = ownerDocument(apiRef.current.rootElementRef.current);\n    doc.body.style.cursor = 'col-resize';\n    resizeDirection.current = getResizeDirection(event.currentTarget, theme.direction);\n    initialOffsetToSeparator.current = computeOffsetToSeparator(event.clientX, colElementRef.current.getBoundingClientRect(), resizeDirection.current);\n    doc.addEventListener('mousemove', handleResizeMouseMove);\n    doc.addEventListener('mouseup', handleResizeMouseUp);\n\n    // Prevent the click event if we have resized the column.\n    // Fixes https://github.com/mui/mui-x/issues/4777\n    doc.addEventListener('click', preventClick, true);\n  });\n  const handleColumnSeparatorDoubleClick = useEventCallback((params, event) => {\n    if (props.disableAutosize) {\n      return;\n    }\n\n    // Only handle left clicks\n    if (event.button !== 0) {\n      return;\n    }\n    const column = apiRef.current.state.columns.lookup[params.field];\n    if (column.resizable === false) {\n      return;\n    }\n    apiRef.current.autosizeColumns(_extends({}, props.autosizeOptions, {\n      columns: [column.field]\n    }));\n  });\n\n  /**\n   * API METHODS\n   */\n\n  const columnVirtualizationDisabled = useColumnVirtualizationDisabled(apiRef);\n  const isAutosizingRef = React.useRef(false);\n  const autosizeColumns = React.useCallback(async userOptions => {\n    var _apiRef$current$rootE, _userOptions$columns;\n    const root = (_apiRef$current$rootE = apiRef.current.rootElementRef) == null ? void 0 : _apiRef$current$rootE.current;\n    if (!root) {\n      return;\n    }\n    if (isAutosizingRef.current) {\n      return;\n    }\n    isAutosizingRef.current = true;\n    const state = gridColumnsStateSelector(apiRef.current.state);\n    const options = _extends({}, DEFAULT_GRID_AUTOSIZE_OPTIONS, userOptions, {\n      columns: (_userOptions$columns = userOptions == null ? void 0 : userOptions.columns) != null ? _userOptions$columns : state.orderedFields\n    });\n    options.columns = options.columns.filter(c => state.columnVisibilityModel[c] !== false);\n    const columns = options.columns.map(c => apiRef.current.state.columns.lookup[c]);\n    try {\n      apiRef.current.unstable_setColumnVirtualization(false);\n      await columnVirtualizationDisabled();\n      const widthByField = extractColumnWidths(apiRef, options, columns);\n      const newColumns = columns.map(column => _extends({}, column, {\n        width: widthByField[column.field],\n        computedWidth: widthByField[column.field]\n      }));\n      if (options.expand) {\n        var _apiRef$current$getRo, _apiRef$current$getRo2;\n        const visibleColumns = state.orderedFields.map(field => state.lookup[field]).filter(c => state.columnVisibilityModel[c.field] !== false);\n        const totalWidth = visibleColumns.reduce((total, column) => {\n          var _ref, _widthByField$column$;\n          return total + ((_ref = (_widthByField$column$ = widthByField[column.field]) != null ? _widthByField$column$ : column.computedWidth) != null ? _ref : column.width);\n        }, 0);\n        const availableWidth = (_apiRef$current$getRo = (_apiRef$current$getRo2 = apiRef.current.getRootDimensions()) == null ? void 0 : _apiRef$current$getRo2.viewportInnerSize.width) != null ? _apiRef$current$getRo : 0;\n        const remainingWidth = availableWidth - totalWidth;\n        if (remainingWidth > 0) {\n          const widthPerColumn = remainingWidth / (newColumns.length || 1);\n          newColumns.forEach(column => {\n            column.width += widthPerColumn;\n            column.computedWidth += widthPerColumn;\n          });\n        }\n      }\n      apiRef.current.updateColumns(newColumns);\n    } finally {\n      apiRef.current.unstable_setColumnVirtualization(true);\n      isAutosizingRef.current = false;\n    }\n  }, [apiRef, columnVirtualizationDisabled]);\n\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => stopListening, [stopListening]);\n  useOnMount(() => {\n    if (props.autosizeOnMount) {\n      Promise.resolve().then(() => {\n        apiRef.current.autosizeColumns(props.autosizeOptions);\n      });\n    }\n  });\n  useGridNativeEventListener(apiRef, () => {\n    var _apiRef$current$colum5;\n    return (_apiRef$current$colum5 = apiRef.current.columnHeadersElementRef) == null ? void 0 : _apiRef$current$colum5.current;\n  }, 'touchstart', handleTouchStart, {\n    passive: doesSupportTouchActionNone()\n  });\n  useGridApiMethod(apiRef, {\n    autosizeColumns\n  }, 'public');\n  useGridApiEventHandler(apiRef, 'columnResizeStop', handleResizeStop);\n  useGridApiEventHandler(apiRef, 'columnResizeStart', handleResizeStart);\n  useGridApiEventHandler(apiRef, 'columnSeparatorMouseDown', handleColumnResizeMouseDown);\n  useGridApiEventHandler(apiRef, 'columnSeparatorDoubleClick', handleColumnSeparatorDoubleClick);\n  useGridApiOptionHandler(apiRef, 'columnResize', props.onColumnResize);\n  useGridApiOptionHandler(apiRef, 'columnWidthChange', props.onColumnWidthChange);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}